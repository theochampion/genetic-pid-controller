(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{42:function(t,e,n){t.exports=n(70)},47:function(t,e,n){},57:function(t,e){},70:function(t,e,n){"use strict";n.r(e);var i=n(1),a=n.n(i),r=n(19),o=n.n(r),s=(n(47),n(48),n(8)),c=n.n(s),l=n(14),u=n(11),h=n(24),f=n(20),m=n(5),d=n(6),p=n(22),g=n(21),v=n(23),b=n(36),_=n.n(b),w=n(2),E=function(){function t(e,n,i,a){Object(m.a)(this,t),this.k_p="number"===typeof e?e:1,this.k_i=n||0,this.k_d=i||0,this.dt=a||0,this.i_max=0,this.sumError=0,this.lastError=0,this.lastTime=0,this.target=0}return Object(d.a)(t,[{key:"setTarget",value:function(t){this.target=t}},{key:"update",value:function(t){this.currentValue=t;var e=this.dt;if(!e){var n=Date.now();e=0===this.lastTime?0:(n-this.lastTime)/1e3,this.lastTime=n}"number"===typeof e&&0!==e||(e=1);var i=this.target-this.currentValue;if(this.sumError=this.sumError+i*e,this.i_max>0&&Math.abs(this.sumError)>this.i_max){var a=this.sumError>0?1:-1;this.sumError=a*this.i_max}var r=(i-this.lastError)/e;return this.lastError=i,this.k_p*i+this.k_i*this.sumError+this.k_d*r}},{key:"reset",value:function(){this.sumError=0,this.lastError=0,this.lastTime=0}}]),t}(),y=function(){function t(e,n,i,a){Object(m.a)(this,t);var r=a/2;this.body=w.Bodies.rectangle(e,n-i/2.3,i,a,{collisionFilter:{group:-1},chamfer:{radius:10},density:2e-4,label:"vehicle_body"}),this.wheel=w.Bodies.circle(e+0,n+r,i/2.3,{collisionFilter:{group:-1},friction:.8,label:"vehicle_wheel"});var o=w.Constraint.create({bodyB:this.body,pointB:{x:0,y:r},bodyA:this.wheel,stiffness:1,length:0});this.composite=w.Composite.create({label:"vehicle"}),w.Composite.addBody(this.composite,this.body),w.Composite.addBody(this.composite,this.wheel),w.Composite.addConstraint(this.composite,o),this.collidableBodyId=this.body.id}return Object(d.a)(t,[{key:"setWheelAngularVelocity",value:function(t){w.Body.setAngularVelocity(this.wheel,-t)}},{key:"getBodyAngle",value:function(){return this.body.angle}}]),t}(),k=function(){function t(e,n){Object(m.a)(this,t),this.width=e,this.height=n;var i={isSensor:!0,isStatic:!0},a=w.Bodies.rectangle(e/2+n/2,n/2,1,n,i),r=w.Bodies.rectangle(e/2-n/2,n/2,1,n,i),o=w.Bodies.rectangle(e/2,0,n,1,i),s=w.Bodies.rectangle(e/2,n,n,1,i);a.render.visible=!1,r.render.visible=!1,o.render.visible=!1,s.render.visible=!1,this.rotationStep=0,this.rotationFactor=15e-6,this.walls=w.Composite.create({label:"walls"}),w.Composite.add(this.walls,[r,a,o,s]),this.wheel=w.Composite.create({label:"wheel"}),this.spike2=w.Bodies.polygon(e/2,1.7*n,4,n,{isStatic:!0,friction:.8,chamfer:{radius:70}}),this.spike3=w.Bodies.polygon(e/2,1.7*n,6,n,{isStatic:!0,friction:.8,chamfer:{radius:70}}),this.spike4=w.Bodies.polygon(e/2,1.7*n,7,n,{isStatic:!0,friction:.8,chamfer:{radius:100}}),w.Composite.add(this.wheel,[this.spike2,this.spike3,this.spike4]),this.composite=w.Composite.create({label:"scene"}),w.Composite.add(this.composite,[this.walls,this.wheel])}return Object(d.a)(t,[{key:"reset",value:function(){w.Composite.allBodies(this.wheel).forEach(function(t){w.Body.setAngle(t,-Math.PI/2)}),this.rotationStep=0,this.rotationFactor=15e-6}},{key:"rotateRandomly",value:function(t){var e=this;this.rotationStep+=this.rotationFactor,w.Composite.allBodies(this.wheel).forEach(function(t){w.Body.rotate(t,e.rotationStep),w.Body.setAngularVelocity(t,e.rotationStep)}),this.rotationFactor>1e-8&&(this.rotationFactor-=1e-8)}}]),t}(),j=function(){function t(){var e=this;Object(m.a)(this,t),this.vehicles=[],this.engine=w.Engine.create(),this.simulationWidth=window.innerWidth,this.simulationHeight=window.innerHeight,w.Events.on(this.engine,"collisionStart",function(t){t.pairs.forEach(function(t){e.vehicles.forEach(function(e,n,i){t.bodyA.id!==e.obj.collidableBodyId&&t.bodyB.id!==e.obj.collidableBodyId||(e.resolver(e.stepCount),i.splice(n,1))})})}),w.Events.on(this.engine,"beforeUpdate",function(t){e.scene.rotateRandomly(),e.vehicles.forEach(function(t){t.stepCount+=1,t.obj.setWheelAngularVelocity(t.controller.update(t.obj.getBodyAngle()))})}),this.scene=new k(this.simulationWidth,this.simulationHeight),w.World.add(this.engine.world,[this.scene.composite]),w.Engine.run(this.engine)}return Object(d.a)(t,[{key:"reset",value:function(){this.scene.reset()}},{key:"stop",value:function(){this.vehicles.forEach(function(t){return t.resolver(t.stepCount)})}},{key:"addVehicle",value:function(){var t=Object(u.a)(c.a.mark(function t(e,n,i){var a,r,o,s,l,u;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=new y(this.simulationWidth/2,this.simulationHeight/2,this.simulationHeight/5,this.simulationHeight/3),(r=new E(e,n,i,1)).setTarget(0),s=new Promise(function(t,e){o=t}),l={obj:a,controller:r,resolver:o,stepCount:0},this.vehicles.push(l),t.next=8,s;case 8:return u=t.sent,w.Composite.remove(this.engine.world,l.obj.composite),this.vehicles=this.vehicles.filter(function(t){return t!==l}),t.abrupt("return",u);case 12:case"end":return t.stop()}},t,this)}));return function(e,n,i){return t.apply(this,arguments)}}()},{key:"run",value:function(){var t=this;this.scene.reset(),this.vehicles.forEach(function(e){w.World.add(t.engine.world,[e.obj.composite])})}}]),t}(),x=n(37),O={tournament2:function(t,e){var n=t.length,i=t[Math.floor(Math.random()*n)],a=t[Math.floor(Math.random()*n)];return e(i.fitness,a.fitness)?i.genome:a.genome},tournament3:function(t,e){var n=t.length,i=t[Math.floor(Math.random()*n)],a=t[Math.floor(Math.random()*n)],r=t[Math.floor(Math.random()*n)],o=e(i.fitness,a.fitness)?i:a;return(o=e(o.fitness,r.fitness)?o:r).genome},fittest:function(t,e){return t[0].genome},random:function(t,e){return t[Math.floor(Math.random()*t.length)].genome}},C={tournament2:function(t,e){return[O.tournament2(t,e),O.tournament2(t,e)]},tournament3:function(t,e){return[O.tournament3(t,e),O.tournament3(t,e)]},random:function(t){return[O.random(t),O.random(t)]},fittestRandom:function(t){return[O.fittest(t),O.random(t)]}},S={maximize:function(t,e){return t>=e},minimize:function(t,e){return t<e}},M={iterations:5e3,population_size:10,mutation_rate:.6,crossover_rate:.6,fittestAlwaysSurvive:!0},F=function(){function t(){Object(m.a)(this,t),this.newIndividualFromGenome=function(t){return{fitness:0,genome:t}},this.shouldApplyFromRate=function(t){return Math.random()<=t},this.population=[],this.stopFlag=!1,this.fitness=null,this.seed=null,this.mutate=null,this.crossover=null,this.optimize=S.maximize,this.generation=null,this.notification=null,this.selectParents=C.tournament3,this.selectIndividual=O.tournament3}return Object(d.a)(t,[{key:"stop",value:function(){this.stopFlag=!0}},{key:"run",value:function(){var t=Object(u.a)(c.a.mark(function t(e){var n,i,a,r,o,s,l=this;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(this.config=Object(x.a)({},M,e),n=0;n<this.config.population_size;++n)this.population.push(this.newIndividualFromGenome(this.seed()));this.generation(0,this.population),i=0;case 4:if(!(i<this.config.iterations)||this.stopFlag){t.next=19;break}return this.population=this.population.map(function(){var t=Object(u.a)(c.a.mark(function t(e){return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.fitness(e.genome);case 2:return t.t0=t.sent,t.t1=e.genome,t.abrupt("return",{fitness:t.t0,genome:t.t1});case 5:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()),this.preFitnessEval&&this.preFitnessEval(),t.next=9,Promise.all(this.population);case 9:for(this.population=t.sent,this.population.sort(function(t,e){return l.optimize(t.fitness,e.fitness)?-1:1}),this.generation(i,this.population),a=[],this.config.fittestAlwaysSurvive&&a.push(this.population[0]);a.length<this.config.population_size;)this.crossover&&this.shouldApplyFromRate(this.config.crossover_rate)&&a.length+1<this.config.population_size?(r=this.selectParents(this.population,this.optimize),o=this.crossover(r[0],r[1]),a.concat(o.map(function(t){return l.newIndividualFromGenome(t)}))):(s=this.selectIndividual(this.population,this.optimize),this.shouldApplyFromRate(this.config.mutation_rate)&&(s=this.mutate(s)),a.push(this.newIndividualFromGenome(s)));this.population=a;case 16:++i,t.next=4;break;case 19:this.population=[],this.stopFlag=!1;case 21:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}]),t}(),R=function(t,e){for(var n,i,a,r,o=t.length/e,s=[],c=0;c<t.length;c+=o)s.push((n=parseInt(t.substr(c,o),2),i=0,a=Number.MAX_SAFE_INTEGER,(n-i)*(1-(r=0))/(a-i)+r));return s},z=Number.MAX_SAFE_INTEGER.toString(2).length,B=function(){var t=[Math.random(),Math.random(),Math.random()],e="";return t.forEach(function(t){var n;e+=(n=Math.floor(t*Number.MAX_SAFE_INTEGER).toString(2),"0".repeat(z-n.length)+n)}),e},A=function(t){var e,n,i,a=Math.floor(Math.random()*t.length);return e=t,n=a,i="1"===t[a]?"0":"1",e.substring(0,n)+i+e.substring(n+1)},I=function(t,e){var n=t.length,i=Math.floor(Math.random()*n),a=Math.floor(Math.random()*n);if(i>a){var r=a;a=i,i=r}return[e.substr(0,i)+t.substr(i,a-i)+e.substr(a),t.substr(0,i)+e.substr(i,a-i)+t.substr(a)]},W=n(3),P=n(4);function T(){var t=Object(W.a)(["\n\tz-index: 1;\n\tposition: absolute;\n"]);return T=function(){return t},t}var V=P.a.canvas(T()),G=function(t){function e(t){var n;return Object(m.a)(this,e),(n=Object(p.a)(this,Object(g.a)(e).call(this,t))).canvasRef=a.a.createRef(),n}return Object(v.a)(e,t),Object(d.a)(e,[{key:"componentDidMount",value:function(){var t=this,e=this.canvasRef.current;e.width=window.innerWidth,e.height=window.innerHeight,window.addEventListener("resize",function(){t.canvasRef.current.width=window.innerWidth,t.canvasRef.current.height=window.innerHeight});var n=w.Render.create({canvas:this.canvasRef.current,engine:this.props.engine,options:{width:window.innerWidth,height:window.innerHeight,wireframes:!0,showAngleIndicator:!0,showCollisions:!0,showIds:!0,showDebug:!0}}),i=w.Mouse.create(n.canvas),a=w.MouseConstraint.create(this.props.engine,{mouse:i,constraint:{stiffness:.2,render:{visible:!1}}});w.World.add(this.props.engine.world,a),w.Render.run(n)}},{key:"render",value:function(){return a.a.createElement(V,{ref:this.canvasRef})}}]),e}(a.a.Component);function H(){var t=Object(W.a)(["\n\theight: 1.7rem;\n\talign-self: flex-end;\n"]);return H=function(){return t},t}function N(){var t=Object(W.a)(["\n\theight: 1.7rem;\n\tmargin-left: 1rem;\n\talign-self: flex-end;\n\t&:hover {\n\t\topacity: 0.8;\n\t}\n"]);return N=function(){return t},t}function D(){var t=Object(W.a)(['\n\tfloat: left;\n\tclear: left;\n\tfont-size: 1.5em;\n\tcolor: black;\n\tbackground-color: white;\n\tpadding: 0.2rem 0.3rem;\n\tmargin-top: 0.2rem;\n\tfont-family: "Source Code Pro", monospace;\n']);return D=function(){return t},t}function X(){var t=Object(W.a)(["\n\toverflow: auto;\n"]);return X=function(){return t},t}function J(){var t=Object(W.a)(["\n\tdisplay: flex;\n\tmargin-bottom: 1.5rem;\n"]);return J=function(){return t},t}var U=P.a.div(J()),L=P.a.div(X()),$=P.a.div(D()),q=P.a.a(N()),K=P.a.svg(H()),Q=function(){return a.a.createElement(U,null,a.a.createElement(L,null,a.a.createElement($,null,"genetic"),a.a.createElement($,null,"playground ")),a.a.createElement(q,{href:"https://github.com/theochampion/genetic-playground"},a.a.createElement(K,{version:"1.1",id:"Capa_1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 512 512",xmlSpace:"preserve"},a.a.createElement("g",null,a.a.createElement("g",null,a.a.createElement("path",{style:{fill:"#fff"},d:"M255.968,5.329C114.624,5.329,0,120.401,0,262.353c0,113.536,73.344,209.856,175.104,243.872 c12.8,2.368,17.472-5.568,17.472-12.384c0-6.112-0.224-22.272-0.352-43.712c-71.2,15.52-86.24-34.464-86.24-34.464 c-11.616-29.696-28.416-37.6-28.416-37.6c-23.264-15.936,1.728-15.616,1.728-15.616c25.696,1.824,39.2,26.496,39.2,26.496 c22.848,39.264,59.936,27.936,74.528,21.344c2.304-16.608,8.928-27.936,16.256-34.368 c-56.832-6.496-116.608-28.544-116.608-127.008c0-28.064,9.984-51.008,26.368-68.992c-2.656-6.496-11.424-32.64,2.496-68 c0,0,21.504-6.912,70.4,26.336c20.416-5.696,42.304-8.544,64.096-8.64c21.728,0.128,43.648,2.944,64.096,8.672 c48.864-33.248,70.336-26.336,70.336-26.336c13.952,35.392,5.184,61.504,2.56,68c16.416,17.984,26.304,40.928,26.304,68.992 c0,98.72-59.84,120.448-116.864,126.816c9.184,7.936,17.376,23.616,17.376,47.584c0,34.368-0.32,62.08-0.32,70.496 c0,6.88,4.608,14.88,17.6,12.352C438.72,472.145,512,375.857,512,262.353C512,120.401,397.376,5.329,255.968,5.329z"}))))))};function Y(){var t=Object(W.a)(['\n\tfont-size: 1em;\n\tcolor: white;\n\tfont-family: "Source Code Pro", monospace;\n\tmargin-top: 0.5em;\n']);return Y=function(){return t},t}var Z=P.a.div(Y());function tt(){var t=Object(W.a)(["\n\tposition: absolute;\n\ttop: 0;\n\tright: 0;\n\tbottom: 0;\n\tleft: 0;\n\tz-index: 2;\n\tmargin: 3rem;\n\tdisplay: flex;\n\tjustify-content: space-between;\n"]);return tt=function(){return t},t}var et=P.a.div(tt());function nt(){var t=Object(W.a)([""]);return nt=function(){return t},t}var it=P.a.div(nt());function at(){var t=Object(W.a)([""]);return at=function(){return t},t}function rt(){var t=Object(W.a)(['\n\tmargin-left: 0.5rem;\n\twidth: 8rem;\n\tpadding: 0.2rem 0.5rem;\n\tdisplay: inline-block;\n\tborder: 1px solid #333;\n\t-webkit-appearance: none;\n\t-webkit-border-radius: 0px;\n\tbackground-color: transparent;\n\tfont-size: 1em;\n\tcolor: white;\n\tfont-family: "Source Code Pro", monospace;\n\toutline: none;\n\t&:disabled {\n\t\tborder-color: transparent;\n\t}\n']);return rt=function(){return t},t}function ot(){var t=Object(W.a)(['\n\tmargin-left: 0.5rem;\n\twidth: 4rem;\n\tpadding: 0.2rem 0.5rem;\n\tdisplay: inline-block;\n\tborder: 1px solid #333;\n\tbackground-color: transparent;\n\tfont-size: 1em;\n\tcolor: white;\n\tfont-family: "Source Code Pro", monospace;\n\toutline: none;\n\t&:disabled {\n\t\tborder-color: transparent;\n\t}\n']);return ot=function(){return t},t}function st(){var t=Object(W.a)(['\n\tfont-size: 1em;\n\tcolor: white;\n\tfont-family: "Source Code Pro", monospace;\n']);return st=function(){return t},t}function ct(){var t=Object(W.a)(["\n\tmargin-bottom: 0.5rem;\n\tdisplay: flex;\n\tflex-direction: row;\n\talign-items: center;\n\tjustify-content: stretch;\n"]);return ct=function(){return t},t}var lt=P.a.div(ct()),ut=P.a.div(st()),ht=P.a.input(ot()),ft=P.a.select(rt()),mt=P.a.option(at()),dt=function(t){var e=t.text,n=t.name,i=t.value,r=t.options,o=t.disabled,s=t.onChange;return a.a.createElement(lt,null,a.a.createElement(ut,null,"".concat(e,":")),void 0===r?a.a.createElement(ht,{name:n,onChange:s,disabled:o,value:i}):a.a.createElement(ft,{name:n,onChange:s,disabled:o,value:i},r.map(function(t){return a.a.createElement(mt,{key:t,value:t},t)})))};function pt(){var t=Object(W.a)(["\n\tpadding: 1rem;\n"]);return pt=function(){return t},t}var gt=P.a.div(pt());function vt(){var t=Object(W.a)(['\n\tmargin-top: 1rem;\n\tpadding: 0.5rem 1rem;\n\tborder: 2px solid white;\n\tbackground-color: transparent;\n\tcolor: white;\n\tfont-size: 1rem;\n\tfont-family: "Source Code Pro", monospace;\n\tcursor: pointer;\n\toutline: none;\n\t&:hover {\n\t\topacity: 0.8;\n\t}\n']);return vt=function(){return t},t}var bt=P.a.button(vt());function _t(){var t=Object(W.a)(["\n\tcolor: white;\n\ttext-decoration: none;\n\t&:hover {\n\t\tcursor: pointer;\n\t\topacity: 0.8;\n\t}\n"]);return _t=function(){return t},t}function wt(){var t=Object(W.a)(['\n\talign-self: flex-end;\n\tfont-size: 0.8rem;\n\tcolor: white;\n\tfont-family: "Source Code Pro", monospace;\n']);return wt=function(){return t},t}var Et=P.a.div(wt()),yt=P.a.a(_t()),kt=function(){return a.a.createElement(Et,null,"Made with"," ",a.a.createElement("span",{role:"img","aria-label":"heart"},"\u2764\ufe0f")," ","by"," ",a.a.createElement(yt,{href:"https://github.com/theochampion"},"Th\xe9o Champion"))};function jt(){var t=Object(W.a)([""]);return jt=function(){return t},t}var xt=P.a.div(jt());function Ot(){var t=Object(W.a)(["\n\tfont-size: 1em;\n\tcolor: ",';\n\tfont-family: "Source Code Pro", monospace;\n']);return Ot=function(){return t},t}function Ct(){var t=Object(W.a)(['\n\twidth: 300px;\n\tword-wrap: break-word;\n\tmargin-top: 0.5em;\n\tfont-size: 0.8em;\n\tcolor: white;\n\tfont-family: "Source Code Pro", monospace;\n']);return Ct=function(){return t},t}var St=P.a.div(Ct()),Mt=P.a.span(Ot(),function(t){return t.color}),Ft=["#df2644","#e96a7f","#f19dab","#fff"],Rt=function(t){var e=t.genomes,n=e.slice(-1),i=Object(l.a)(n,1)[0],r=e.slice(-4,-1).reverse(),o=R(i,3),s=r.map(function(t){return R(t,3)});return a.a.createElement(a.a.Fragment,null,a.a.createElement(Z,null,"Fittest individual:"),a.a.createElement(Z,null,"genome:"),a.a.createElement(St,null,Array.from(i).map(function(t,e){var n=Ft.length-1,i=!0,o=!1,s=void 0;try{for(var c,u=r.entries()[Symbol.iterator]();!(i=(c=u.next()).done);i=!0){var h=c.value,f=Object(l.a)(h,2),m=f[0],d=f[1];if(Array.from(d)[e]!==t){n=m;break}}}catch(p){o=!0,s=p}finally{try{i||null==u.return||u.return()}finally{if(o)throw s}}return a.a.createElement(Mt,{key:e,color:Ft[n]},t)})),a.a.createElement(Z,null,"\xa0p_gain:\xa0\xa0\xa0\xa0i_gain:\xa0\xa0\xa0\xa0d_gain:"),a.a.createElement(Z,null,o.map(function(t,e){var n=Ft.length-1,i=!0,r=!1,o=void 0;try{for(var c,u=s.entries()[Symbol.iterator]();!(i=(c=u.next()).done);i=!0){var h=c.value,f=Object(l.a)(h,2),m=f[0];if(f[1][e]!==t){n=m;break}}}catch(d){r=!0,o=d}finally{try{i||null==u.return||u.return()}finally{if(r)throw o}}return a.a.createElement(Mt,{key:e,color:Ft[n]},"".concat(t.toFixed(7)),"\xa0\xa0")})))};function zt(){var t=Object(W.a)(['\n\tfont-size: 1em;\n\tcolor: #d21f3c;\n\tfont-family: "Source Code Pro", monospace;\n']);return zt=function(){return t},t}var Bt=P.a.span(zt()),At=function(t){var e=t.perc;return e>=0?"+".concat(e.toFixed(1),"%"):a.a.createElement(Bt,null,"".concat(e.toFixed(1),"%"))},It=n(16);function Wt(){var t=Object(W.a)(["\n\tmargin-top: 1rem;\n"]);return Wt=function(){return t},t}var Pt=P.a.div(Wt()),Tt=function(t){var e=t.best_fitness_data,n=t.avg_fitness_data;return a.a.createElement(Pt,null,a.a.createElement(It.c,{width:300,height:200},a.a.createElement(It.a,{data:e.map(function(t){return{x:t.generation,y:t.fitness}}),color:"red",curve:null,opacity:1,strokeStyle:"solid",strokeWidth:"1px"}),a.a.createElement(It.a,{data:n.map(function(t){return{x:t.generation,y:t.fitness}}),color:"red",curve:null,opacity:.9,strokeStyle:"dashed",strokeWidth:"1px"}),a.a.createElement(It.b,{title:"generation",style:{line:{stroke:"#fff"},ticks:{stroke:"#fff"},text:{stroke:"none",fill:"#fff",fontWeight:600},title:{stroke:"none",fill:"#fff",fontWeight:600}}}),a.a.createElement(It.d,{title:"fitness",style:{line:{stroke:"#fff"},ticks:{stroke:"#fff"},text:{stroke:"none",fill:"#fff",fontWeight:600},title:{stroke:"none",fill:"#fff",fontWeight:600}}})))},Vt=function(t){return t[t.length-1]},Gt=function(t){return t.length<=2?0:(e=t[t.length-1].fitness,n=t[t.length-2].fitness,(e-n)/n*100);var e,n},Ht=function(t,e){var n="";return t.forEach(function(t,i){return n+="".concat(t.generation,",").concat(t.fitness,",").concat(e[i].fitness,"\n")}),console.log(n),encodeURI("data:text/csv;charset=utf-8,".concat("generation,best_fitness,average_fitness","\n").concat(n))},Nt=[{text:"Population Size",name:"population_size"},{text:"Mutation rate",name:"mutation_rate"},{text:"Crossover rate",name:"crossover_rate"},{text:"Random seed",name:"random_seed"}],Dt="h8cnkRWfbI",Xt=function(t){function e(t){var n;return Object(m.a)(this,e),(n=Object(p.a)(this,Object(g.a)(e).call(this,t)))._runSimulation=function(){n.setState({avg_fitness_stat:[],best_fitness_stat:[],best_genomes:[]}),_()(n.state.random_seed,{global:!0}),n.geneticEngine.run({iterations:5e3,population_size:parseFloat(n.state.population_size),mutation_rate:parseFloat(n.state.mutation_rate),crossover_rate:parseFloat(n.state.crossover_rate)}),n.setState({simulationRunning:!0})},n._stopSimulation=function(){n.geneticEngine.stop(),n.simulatorEngine.stop(),n.setState({simulationRunning:!1})},n._handleSettingChange=function(t){return n.setState(Object(f.a)({},t.target.name,t.target.value))},n._downloadStatsAsCSV=function(){var t=Ht(n.state.best_fitness_stat,n.state.avg_fitness_stat),e="GP_export_".concat(n.state.indiv_selector,"_").concat(n.state.parent_selector,"_").concat(n.state.population_size,"_").concat(n.state.mutation_rate,"_").concat(n.state.crossover_rate,"_").concat(n.state.random_seed,"_").concat(Date.now(),".csv"),i=document.createElement("a");i.setAttribute("href",t),i.setAttribute("download",e),document.body.appendChild(i),i.click(),document.body.removeChild(i)},n.isMobile=window.innerWidth<=700,n.state={indiv_selector:"tournament3",parent_selector:"tournament3",population_size:10,mutation_rate:.5,crossover_rate:.5,random_seed:Dt,simulationRunning:!1,generation:0,best_genomes:[],best_fitness_stat:[],avg_fitness_stat:[]},n.geneticEngine=new F,n.simulatorEngine=new j,n.geneticEngine.seed=B,n.geneticEngine.mutate=A,n.geneticEngine.crossover=I,n.geneticEngine.optimize=S.maximize,n.geneticEngine.selectIndividual=O[n.state.indiv_selector],n.geneticEngine.selectParents=C[n.state.parent_selector],n.geneticEngine.generation=function(t,e){n.setState(function(n){return{generation:t+1,best_genomes:[].concat(Object(h.a)(n.best_genomes),[e[0].genome]),best_fitness_stat:[].concat(Object(h.a)(n.best_fitness_stat),[{generation:t,fitness:e[0].fitness}]),avg_fitness_stat:[].concat(Object(h.a)(n.avg_fitness_stat),[{generation:t,fitness:e.map(function(t){return t.fitness}).reduce(function(t,e){return t+e},0)/e.length}])}})},n.geneticEngine.preFitnessEval=function(){n.simulatorEngine.run()},n.geneticEngine.fitness=function(){var t=Object(u.a)(c.a.mark(function t(e){var i,a,r,o,s;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i=R(e,3),a=Object(l.a)(i,3),r=a[0],o=a[1],s=a[2],t.next=3,n.simulatorEngine.addVehicle(r,o,s);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),n}return Object(v.a)(e,t),Object(d.a)(e,[{key:"render",value:function(){var t=this;return a.a.createElement(a.a.Fragment,null,a.a.createElement(et,null,(!this.isMobile||!this.state.simulationRunning)&&a.a.createElement(it,null,a.a.createElement(Q,null),a.a.createElement(kt,null),a.a.createElement(gt,null),a.a.createElement(dt,{text:"Indiv selector",name:"indiv_selector",value:this.state.indiv_selector,options:Object.keys(O),disabled:this.state.simulationRunning,onChange:function(e){t.geneticEngine.selectIndividual=O[e.target.value],t._handleSettingChange(e)}}),a.a.createElement(dt,{text:"Parent selector",name:"parent_selector",value:this.state.parent_selector,options:Object.keys(C),disabled:this.state.simulationRunning,onChange:function(e){t.geneticEngine.selectParents=C[e.target.value],t._handleSettingChange(e)}}),a.a.createElement(gt,null),Nt.map(function(e){var n=e.text,i=e.name;return a.a.createElement(dt,{key:i,text:n,name:i,value:t.state[i],disabled:t.state.simulationRunning,onChange:t._handleSettingChange})}),a.a.createElement(bt,{onClick:this.state.simulationRunning?this._stopSimulation:this._runSimulation},this.state.simulationRunning?"Stop":"Run")),this.state.simulationRunning&&a.a.createElement(xt,null,a.a.createElement(Z,null,"Generation: ".concat(this.state.generation)),a.a.createElement(Z,null,"Average fitness: ".concat(Vt(this.state.avg_fitness_stat).fitness.toFixed(2)," ("),a.a.createElement(At,{perc:Gt(this.state.avg_fitness_stat)}),")"),a.a.createElement(Z,null,"Best fitness: ".concat(Vt(this.state.best_fitness_stat).fitness.toFixed(2)," ("),a.a.createElement(At,{perc:Gt(this.state.best_fitness_stat)}),")"),a.a.createElement(Tt,{best_fitness_data:this.state.best_fitness_stat,avg_fitness_data:this.state.avg_fitness_stat}),this.isMobile?a.a.createElement(bt,{onClick:this.state.simulationRunning?this._stopSimulation:this._runSimulation},this.state.simulationRunning?"Stop":"Run"):a.a.createElement(a.a.Fragment,null,a.a.createElement(Rt,{genomes:this.state.best_genomes}),a.a.createElement(bt,{onClick:this._downloadStatsAsCSV},"Download CSV")))),a.a.createElement(G,{engine:this.simulatorEngine.engine}))}}]),e}(i.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(Xt,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}},[[42,1,2]]]);
//# sourceMappingURL=main.ce275820.chunk.js.map